{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 53f9d5b717027399a372","webpack:///./src/index.js","webpack:///./src/MockRestApiServer.js","webpack:///external \"express\"","webpack:///external \"body-parser\"","webpack:///external \"cors\"","webpack:///./src/ResponseHandler.js"],"names":[],"mappings":"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","file":"express-mock-rest-api.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"express\"), require(\"body-parser\"), require(\"cors\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"express-mock-rest-api\", [\"express\", \"body-parser\", \"cors\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"express-mock-rest-api\"] = factory(require(\"express\"), require(\"body-parser\"), require(\"cors\"));\n\telse\n\t\troot[\"express-mock-rest-api\"] = factory(root[\"express\"], root[\"body-parser\"], root[\"cors\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 53f9d5b717027399a372\n **/","var MockApiRestServer = require(\"./MockRestApiServer\");\n\n\nfunction mockRestServer(mockApiPath, port, options) {\n    var mockApiRestServer = new MockApiRestServer(port,mockApiPath,options);\n    mockApiRestServer.start();\n    return ((server)=>{\n        return ()=>{\n            server.stop();\n        }\n    })(mockApiRestServer);\n}\n\nmodule.exports = mockRestServer;\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import express from \"express\";\nimport bodyParser from \"body-parser\";\nimport cors from \"cors\";\nimport {ResponseHandler} from \"./ResponseHandler\";\n\n\nclass MockRestApiServer {\n\n    constructor(port,mockApiPath,options) {\n        this.started = false;\n        this.options = options;\n        this.port = port;\n        this.mockApiPath = mockApiPath;\n        this.responseHandler = new ResponseHandler();\n        this.server = null;\n    }\n    stop() {\n        if(this.server != null && this.started == true) {\n            this.server.stop();\n        }\n    }\n    start() {\n        var app = express();\n        app.disable('etag');\n        app.set(\"port\", this.port);\n\n        var responseApi = express();\n        var corsOptionsDelegate = (req, callback) => {\n            callback(null,{ origin: true, credentials : true});\n        };\n        responseApi.options(\"/add\",cors(corsOptionsDelegate));\n\n        responseApi.use(bodyParser.json());\n\n        responseApi.post(\"/add\",(request,response) => {\n            var json = request.body;\n            this.responseHandler.mapResponse(json.path, json.method, json.responseHttpStatus, json.responseBody, json.responseHeaders || {});\n            response.set(\"Access-Control-Allow-Origin\",request.headers.origin);\n            response.set(\"Content-Type\", \"application/json\");\n            response.send('{\"result\" : \"OK\"}');\n        });\n\n\n        var mockApi = express();\n\n        mockApi.use(cors(corsOptionsDelegate));\n        mockApi.disable('etag');\n        mockApi.post(\"/*\",(request,response)=>{\n            console.log(\"Handle POST\");\n            this.handleRequest(request, \"POST\", response);\n        });\n        mockApi.get(\"/*\",(request,response)=>{\n            console.log(\"Handle GET\");\n            this.handleRequest(request, \"GET\", response);\n        });\n\n        app.use(\"/responses\",responseApi);\n        app.use(this.mockApiPath,mockApi);\n\n        var welcome = express();\n        welcome.get(\"/\",(req,res)=>{\n            res.send(\"Welcome!\");\n        });\n        app.use(\"/\",welcome);\n\n        this.server = app.listen(app.get('port'), () => {\n            var port = this.server.address().port;\n            console.log('Magic happens on port ' + port);\n            this.started = true;\n        });\n    }\n    setGlobalHeaders(request, response) {\n        if(this.options.useRequestHostAsAllowOrigin) {\n            response.set(\"Access-Control-Allow-Origin\",request.headers.host)\n        }\n        if(this.options.headers) {\n            for(var h in this.options.headers) {\n                response.set(h,this.options.headers[h]);\n            }\n        }\n    }\n\n    handleRequest(request, method, response) {\n        var apiResponse = this.responseHandler.onRequest(request.url,method,request.body,null);\n        if (apiResponse) {\n            if (apiResponse.responseHeaders) {\n                for (var x in response.responseHeaders) {\n                    response.set(x, response.responseHeaders[x]);\n                }\n            }\n            response.header('Cache-Control', 'no-cache, no-store, must-revalidate');\n            response.header('Expires', '-1');\n            response.header('Pragma', 'no-cache');\n            console.log(\"Sending response = \", apiResponse.responseBody);\n            response.status(apiResponse.responseHttpStatus).json(apiResponse.responseBody);\n        } else {\n            this.notFound(response, request);\n        }\n    }\n\n    notFound(response, request) {\n        response.status(404).send(\"No response mapped for \" + request.url + \" available: \" + this.responseHandler.getMappedPaths());\n    }\n\n}\n\nmodule.exports = MockRestApiServer;\n\n\n/** WEBPACK FOOTER **\n ** ./src/MockRestApiServer.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"body-parser\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"cors\"\n ** module id = 4\n ** module chunks = 0\n **/","\nexport class PathResponse {\n    constructor(path,method,status,body,headers) {\n        this.path = path;\n        this.method = method;\n        this.responseHttpStatus = status;\n        this.responseBody = body;\n        this.responseHeaders = headers;\n        this.requests = [];\n    }\n    onRequest(pathRequest) {\n        this.requests.push(pathRequest);\n    }\n}\nexport class PathRequest {\n    constructor(path,method,requestIndex, body,headers) {\n        this.path = path;\n        this.method = method;\n        this.body = body;\n        this.headers = headers;\n        this.requestIndex = requestIndex;\n    }\n}\n\nexport class PathMapping {\n\n    constructor(path,method){\n        this.path = path;\n        this.method = method;\n        this.responses = [];\n        this.currentResponse = 0;\n    }\n    addResponse(pathResponse) {\n        this.responses.push(pathResponse);\n    }\n    getNrOfRequests() {\n        return this.responses.reduce((prev,current)=>{\n            var prevLength = prev.requests.length;\n            return (prevLength ? prevLength : 0)  + current.requests.length;\n        });\n    }\n    getNextResponse(pathRequest) {\n        var r = this.responses[this.currentResponse];\n        if(this.currentResponse +1 < this.responses.length) {\n            this.currentResponse++;\n        }\n        r.onRequest(pathRequest);\n        return r;\n    }\n}\n\nexport class ResponseHandler {\n\n\n    constructor() {\n        this.pathMappings = [];\n        this.currentRequest = 0;\n    }\n\n    reset() {\n        this.pathMappings = [];\n        this.currentRequest = 0;\n    }\n\n    getMappedPaths() {\n        return this.pathMappings.map( pathMapping => {\n            return \"[\" + pathMapping.method + \":\"+pathMapping.path + \"]\";\n        }).join(\",\");\n    }\n    mapResponse(path, method, status, body, headers) {\n        var pathResponse = new PathResponse(path,method,status,body,headers);\n        var existing = this.pathMappings.find(pathMapping => {\n           return pathMapping.path == pathResponse.path && pathMapping.method == pathResponse.method;\n        });\n\n        if(!existing) {\n            existing = new PathMapping(pathResponse.path, pathResponse.method);\n            this.pathMappings.push(existing);\n        }\n        existing.addResponse(pathResponse);\n    }\n\n    onRequest(path, method, body, headers) {\n        var pathRequest = new PathRequest(path,method,this.currentRequest++, body,headers);\n        var mapping = this.findMapping(path, method);\n        if(mapping) {\n            return mapping.getNextResponse(pathRequest);\n        } else {\n            return null;\n        }\n    }\n\n    findMapping(path, method) {\n        var mapping = this.pathMappings.find((pathMapping)=> {\n            return pathMapping.path == path && pathMapping.method == method;\n        });\n        return mapping;\n    }\n\n    findMappings(path) {\n        var mappings = this.pathMappings.filter((pathMapping)=> {\n            return pathMapping.path == path;\n        });\n        return mappings;\n    }\n    getOptionsForPath(path) {\n        var mappings = this.findMappings(path,method);\n        return mappings.map(m => m.method).join(\",\");\n    }\n\n    getRequestsForMappings(path,method,status) {\n        var requests = [];\n        var mappings = this.pathMappings.filter(pathMapping => {\n            if(path && method) {\n                return pathMapping.path == path && pathMapping.method == method;\n            } else if(path) {\n                return pathMapping.path == path;\n            } else {\n                return true;\n            }\n        });\n        var responses =[];\n        mappings.forEach(pathMapping => {\n            responses = responses.concat(pathMapping.responses);\n        });\n        if(status) {\n            responses = responses.filter(response => {\n                return response.responseHttpStatus == status;\n            });\n        }\n        responses.forEach(response => {\n            requests = requests.concat(response.requests);\n        });\n        responses.sort((a,b)=>{\n            return a.requestIndex - b.requestIndex;\n        });\n\n        return requests;\n\n    }\n\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/ResponseHandler.js\n **/"],"sourceRoot":""}